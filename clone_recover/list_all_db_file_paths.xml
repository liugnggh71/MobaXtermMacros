<?xml version="1.0" encoding="UTF-8"?>
<macro xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="../MobaMacro.xsd">
   <name>list_all_db_file_paths</name>
   <desc>Full code file: list_all_db_file_paths.sql</desc>
   <environment>SQLPlus</environment>
   <hotkey>0</hotkey>
   <line type="Text">set linesize 132</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">column FILE_PATH format a75</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">WITH db_files</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">     AS (SELECT name FROM v$datafile</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">         UNION ALL</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">         SELECT MEMBER name FROM v$logfile</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">         UNION ALL</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">         SELECT name FROM v$tempfile)</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">SELECT DISTINCT SUBSTR (name,</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                        1,</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                          LENGTH (name)</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                        - REGEXP_INSTR (reverse (name),</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                                        '[/\]',</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                                        1,</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                                        1)</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                        + 1) file_path</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">  FROM db_files;</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">  </line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">WITH db_files</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">     AS (SELECT name FROM v$controlfile</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">         )</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">SELECT DISTINCT SUBSTR (name,</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                        1,</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                          LENGTH (name)</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                        - REGEXP_INSTR (reverse (name),</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                                        '[/\]',</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                                        1,</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                                        1)</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                        + 1) control_file_path</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">  FROM db_files;</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">  </line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">SELECT SUBSTR (name,</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                 1,</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                 INSTR (name,</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                        '/',</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                        -1,</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                        1))</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">            file_path,</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">         ROUND (SUM (bytes) / 1024 / 1024) MB</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">    FROM (SELECT name, bytes FROM v$datafile</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">          UNION ALL</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">          SELECT name, bytes FROM v$tempfile</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">          UNION ALL</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">          SELECT F.MEMBER name, l.bytes</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">            FROM v$logfile f, v$log l</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">           WHERE F.GROUP# = L.GROUP#)</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">GROUP BY SUBSTR (name,</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                 1,</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                 INSTR (name,</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                        '/',</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                        -1,</line>
   <line type="KeyPress">RETURN</line>
   <line type="Text">                        1));</line>
   <line type="KeyPress">RETURN</line>
</macro>
